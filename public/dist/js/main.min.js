$.fn.exists=function(t){var e=[].slice.call(arguments,1);return this.length&&t.call(this,e),this},$.ajaxSetup({headers:{"X-CSRF-Token":TOKEN}}),$(function(){$(".tracker").exists(function(){new Tracker(this)}),$(".get-bets").exists(function(){new getBets(this)})});
var getBets=function(t){this.url="",this.btn=t,this.pressedBtn=null,this.addListeners()};getBets.prototype={constructor:getBets,addListeners:function(){this.btn.on("click",$.proxy(this.getBets,this))},getBets:function(t){this.pressedBtn=$(t.target);var e=this.pressedBtn.data("market");this.marketId=e.market_id,this.store()},store:function(){var t=this;$.ajax("/get-bets",{type:"post",data:{marketId:t.marketId},dataType:"json",beforeSend:function(){},success:function(e){var s=t.btn.closest(".panel").find(".panel-body").find("table");if(e[0].runners)for(var n=0;n<e[0].runners.length;++n){var r=e[0].runners[n].ex.availableToLay;if(r.length)for(var d=0;d<r.length;++d){var a="<tr><td>"+e[0].runners[n].selectionId+"</td>";a=a+"<td>"+r[d].size+"</td>",a=a+"<td>"+r[d].price+"</td>",a=a+"<td>"+e[0].runners[n].status+"</td></tr>",s.append(a)}else{var a="<tr><td>"+e[0].runners[n].selectionId+"</td>";a+="<td></td>",a+="<td></td>",a=a+"<td>"+e[0].runners[n].status+"</td></tr>",s.append(a)}}t.pressedBtn.prop("disabled",!0)},error:function(t,e,s){console.log(t+" - "+e+" - "+s)},complete:function(){t.pressedBtn.prop("disabled",!1)}})}};
var Tracker=function(t){this.url="",this.btn=t,this.pressedBtn=null,this.addListeners()};Tracker.prototype={constructor:Tracker,addListeners:function(){this.btn.on("click",$.proxy(this.track,this))},track:function(t){this.pressedBtn=$(t.target),this.market=this.pressedBtn.data("market"),this.store()},store:function(){var t=this;$.ajax("/store-market",{type:"post",data:{market:t.market},dataType:"json",beforeSend:function(){},success:function(e){console.log(e),t.pressedBtn.prop("disabled",!0),t.pressedBtn.text("tracked")},error:function(t,e,s){console.log(t+" - "+e+" - "+s)},complete:function(){}})}};